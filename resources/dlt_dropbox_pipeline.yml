# The main pipeline for dlt_dropbox
resources:
  pipelines:
    dlt_dropbox_pipeline:
      name: synthea-meta-ingestion-dropbox
      configuration:
        workflow_inputs.env_mode: prd
        workflow_inputs.catalog_name: mgiglia
        workflow_inputs.schema_name: synthea
        workflow_inputs.volume_name: synthetic_files_raw
        bundle.sourcePath: /Workspace/${workspace.file_path}/src
      libraries:
        - notebook:
            path: ../src/ipython-notebooks/0-dlt-dropbox-bronze.ipynb
      target: synthea_${bundle.environment}
      clusters:
        - label: default
          node_type_id: r5d.2xlarge
          autoscale:
            min_workers: 1
            max_workers: 10
            mode: ENHANCED
      development: true
      photon: true
      channel: PREVIEW
      catalog: mgiglia
      # serverless: true
      # data_sampling: false

# example:
# resources:
#   pipelines:
#     dlt_dropbox_pipeline:
#       name: dlt_dropbox_pipeline
#       target: dlt_dropbox_${bundle.environment}
#       libraries:
#         - notebook:
#             path: ../src/dlt_pipeline.ipynb
#             path: ../src/ipynb-dlt-bronze-dropbox.ipynb

#       configuration:
#         bundle.sourcePath: /Workspace/${workspace.file_path}/src
